{% extends 'base.html' %}

{% block title %}ShadeSnatch {% endblock %}

{% block content %}

        <div class="banner">
            <!-- banner intro and form button -->
            <div class="banner-intro-container">
                <div class="banner-text-container">
                    <div class="text-title">
                        <div>Welcome to</div>
                        <div id="title-name">
                            <span>ShadeSnatch</span>
                        </div>
                    </div>
                    <div class="text-heading">Uncover Colors.</div>
                    <div class="text-heading">Create Magic.</div>
                </div>
                <div class="banner-button-container">
                    <div class="text-subheading">Discover the palette in every picture by <br>uploading your image!</div>
                    <button class="banner-button" id="button">Upload Your Image</button>
                </div>
            </div>
            <!-- banner image -->
            <div class="image-container">
                <div class="image" id="image">
                    {% load static %}
                    <img src="{{ output.image_path }}" alt="Your image">
                </div>
            </div>

        </div>
    </div>
</section>

<div class="form-modal">
    <div class="form-container">
        <div>
            <i class="fa-regular fa-image" id="image-icon"></i>
        </div>
        <div>
            Drag your images here or
        </div>
        <form action='' method="POST" enctype="multipart/form-data" id="image-upload-form">
            {% csrf_token %}
            <div id="drop-zone" class="drop-zone">
                <!-- <label for="" id="label">Upload any image</label> -->
                <p>Drag & Drop your image here or <span id="file-browser">browse</span></p>
                <!-- <input type="file" name="image" > -->
                <input type="file" id="file-input" name="image" accept="image/*" required>
            </div>
            <!-- <div> -->
                <button type="button">Submit</button>
            <!-- </div> -->
        </form>
    </div>
</div>
    {% if output %}
<section class="color-information">

    <div class="colour-list" id="colour-list">
        {% for color in output.hexcodes %}
        <div class="hex_codes">
            <div class="hex_codes_container">
                <div>{{color}}</div>
                <div><i class="fa-regular fa-copy"></i></div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}


{% if output %}

<script src="https://kit.fontawesome.com/your-font-awesome-kit.js"></script>
<script>
    var colorDiv = document.getElementsByClassName('hex_codes');
    for(var i=0; i<colorDiv.length; i++){

        colorDiv[i].style.height='140px';
        // colorDiv[i].style.width='150px';
        var color= colorDiv[i].textContent.trim();
        colorDiv[i].style.backgroundColor= color;

    }

    var btn= document.getElementById('button')
    btn.addEventListener('click', function(){
        // console.log("button clicked")

    })


    document.addEventListener('DOMContentLoaded', () => {
    const dropZone = document.getElementById('drop-zone');
    const fileInput = document.getElementById('file-input');
    const fileBrowser = document.getElementById('file-browser');

    // Highlight the drop zone when a file is dragged over it
    dropZone.addEventListener('dragover', (event) => {
        event.preventDefault();
        dropZone.classList.add('dragover');
    });

    // Remove the highlight when the dragged file leaves the drop zone
    dropZone.addEventListener('dragleave', () => {
        dropZone.classList.remove('dragover');
    });

    // Handle the dropped file
    dropZone.addEventListener('drop', (event) => {
        event.preventDefault();
        dropZone.classList.remove('dragover');
        const files = event.dataTransfer.files;
        if (files.length) {
            fileInput.files = files;
        }
    });

    // Open file browser when clicking the browse link
    fileBrowser.addEventListener('click', () => {
        fileInput.click();
    });

    // Optional: Show a preview of the selected image (if desired)
    fileInput.addEventListener('change', () => {
        const files = fileInput.files;
        if (files.length) {
            const file = files[0];
            const reader = new FileReader();
            reader.onload = (event) => {
                const img = document.createElement('img');
                img.src = event.target.result;
                img.style.maxWidth = '200px';
                img.style.marginTop = '20px';
                dropZone.innerHTML = '';
                dropZone.appendChild(img);
            };
            reader.readAsDataURL(file);
        }
    });
});


</script>
{% endif %}

{% endblock %}